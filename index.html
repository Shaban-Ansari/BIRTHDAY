<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Mehvish ğŸ’–</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
  --bg:#ffeaf3;
  --card:#ffffffdd;
  --accent:#ff6fae;
  --text:#222;
}
body.dark{
  --bg:#0f0f18;
  --card:#1b1b2a;
  --text:#fff;
}
body{
  margin:0;
  font-family:Poppins,system-ui;
  background:var(--bg);
  color:var(--text);
  overflow:hidden;
  transition:.5s;
}
.screen{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  padding:20px;
}
.screen.active{display:flex;}
.card{
  background:var(--card);
  padding:30px;
  border-radius:22px;
  max-width:440px;
  text-align:center;
  box-shadow:0 25px 60px rgba(0,0,0,.25);
  animation:fadeUp 1.2s ease;
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:none}
}
button{
  padding:14px 28px;
  border:none;
  border-radius:30px;
  background:var(--accent);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
.toggle{
  position:fixed;
  top:14px;
  right:14px;
  padding:8px 14px;
  background:var(--accent);
  color:#fff;
  border-radius:20px;
  cursor:pointer;
  z-index:10;
}
.cinematic{
  text-align:center;
  animation:zoom 3s ease forwards;
}
@keyframes zoom{
  from{transform:scale(1.1);opacity:0}
  to{transform:scale(1);opacity:1}
}
.country{
  margin:10px;
  padding:12px 18px;
  border-radius:20px;
  background:#ffd3e6;
  cursor:pointer;
  font-weight:500;
  transition:.3s;
}
.country:hover{background:var(--accent);color:#fff}
.candle{
  width:90px;height:150px;
  background:#ffd1e8;
  border-radius:14px;
  position:relative;
  margin:20px auto;
}
.flame{
  width:22px;height:34px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-34px;
  left:34px;
  animation:flicker .15s infinite;
}
@keyframes flicker{50%{transform:scale(.85)}}
.rose{
  position:fixed;
  top:-40px;
  font-size:24px;
  animation:fall linear infinite;
}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg)}}
.hidden{display:none}
</style>
</head>

<body>

<div class="toggle" onclick="toggleTheme()">ğŸŒ— Theme</div>

<!-- INTRO -->
<div class="screen active">
  <div class="cinematic">
    <h1 id="type"></h1>
    <p style="opacity:.7">A small journey made with care âœ¨</p>
    <button onclick="go(2)">Tap to Begin</button>
  </div>
</div>

<!-- GLOBE -->
<div class="screen" id="s2">
  <div class="card">
    <h3>Choose a country ğŸŒ</h3>
    <div class="country" onclick="next()">ğŸ‡®ğŸ‡³ India</div>
    <div class="country" onclick="next()">ğŸ‡«ğŸ‡· France</div>
    <div class="country" onclick="next()">ğŸ‡¯ğŸ‡µ Japan</div>
    <div class="country" onclick="next()">ğŸ‡ªğŸ‡¸ Spain</div>
    <div class="country" onclick="next()">ğŸ‡¦ğŸ‡ª Arabic</div>
  </div>
</div>

<!-- CANDLE -->
<div class="screen" id="s3">
  <div class="card">
    <div class="candle">
      <div class="flame" id="flame"></div>
    </div>
    <p>Blow into the mic ğŸ¤<br><small>(or tap if mic not allowed)</small></p>
    <button onclick="blow()">Tap Instead</button>
  </div>
</div>

<!-- FINAL -->
<div class="screen" id="s4">
  <div class="card">
    <h2>ğŸ‰ Birthday Level Completed ğŸ‰</h2>
    <p>
      Happy Birthday ğŸŒ™âœ¨<br><br>
      If birthdays were wishes, Iâ€™d wish you soft mornings,
      warm laughter, and moments that feel like flowers ğŸŒ¸ falling slowly.<br><br>
      May chocolates ğŸ« be sweet, smiles be endless,
      and today feel a little magical ğŸ’–ğŸŒ¹
    </p>
    <p style="font-size:22px">ğŸŒ¸ğŸ«ğŸŒ¹ğŸˆğŸ’–</p>
  </div>
</div>

<script>
function toggleTheme(){document.body.classList.toggle("dark")}
function go(n){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById("s"+n)?.classList.add("active");
  confetti({particleCount:120,spread:100});
}
function next(){
  rain();
  go(3);
}
function rain(){
  for(let i=0;i<15;i++){
    let r=document.createElement("div");
    r.className="rose";
    r.innerHTML="ğŸŒ¹";
    r.style.left=Math.random()*100+"vw";
    r.style.animationDuration=4+Math.random()*4+"s";
    document.body.appendChild(r);
    setTimeout(()=>r.remove(),8000);
  }
}
function blow(){
  document.getElementById("flame").classList.add("hidden");
  confetti({particleCount:200,spread:140});
  setTimeout(()=>go(4),900);
}

/* MIC BLOW DETECTION */
navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
  const ctx=new AudioContext();
  const mic=ctx.createMediaStreamSource(stream);
  const analyser=ctx.createAnalyser();
  mic.connect(analyser);
  const data=new Uint8Array(analyser.frequencyBinCount);
  function detect(){
    analyser.getByteFrequencyData(data);
    let volume=data.reduce((a,b)=>a+b)/data.length;
    if(volume>45){blow()}
    requestAnimationFrame(detect);
  }
  detect();
}).catch(()=>{});

/* TYPE NAME */
let i=0,txt="Happy Birthday Mehvish ğŸ’–";
function type(){
  if(i<txt.length){
    document.getElementById("type").innerHTML+=txt[i++];
    setTimeout(type,100);
  }
}
type();
</script>

</body>
</html>
